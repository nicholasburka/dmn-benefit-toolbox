meta {
  name: Pass - Edge Case Near Limits
  type: http
  seq: 8
}

post {
  url: {{host}}/benefits/federal/ssi-eligibility
  body: json
  auth: inherit
}

body:json {
  {
    "situation": {
      "evaluationDate": "2025-01-01",
      "primaryPersonId": "p1",
      "people": [
        {
          "id": "p1",
          "dateOfBirth": "1955-06-15",
          "citizenshipStatus": "US_CITIZEN",
          "isBlindOrDisabled": false,
          "residenceState": "WA",
          "countableResources": 1999,
          "incomeSources": [
            {
              "id": "inc1",
              "type": "earned",
              "category": "wages",
              "monthlyAmount": 1900,
              "description": "Part-time work",
              "isInfrequentOrIrregular": false
            }
          ]
        }
      ],
      "enrollments": [],
      "relationships": [],
      "simpleChecks": {}
    }
  }
}

assert {
  res.status: eq 200
  res.body.checks.categoricalEligible: eq true
  res.body.checks.citizenshipEligible: eq true
  res.body.checks.residenceEligible: eq true
  res.body.checks.resourceEligible: eq true
  res.body.checks.incomeEligible: eq true
  res.body.isEligible: eq true
}

settings {
  encodeUrl: true
  timeout: 0
}
