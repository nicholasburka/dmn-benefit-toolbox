meta {
  name: Pass - Multiple Income Sources
  type: http
  seq: 9
}

post {
  url: {{host}}/benefits/federal/ssi-eligibility
  body: json
  auth: inherit
}

body:json {
  {
    "situation": {
      "evaluationDate": "2025-01-01",
      "primaryPersonId": "p1",
      "people": [
        {
          "id": "p1",
          "dateOfBirth": "1955-06-15",
          "citizenshipStatus": "NATURALIZED_CITIZEN",
          "isBlindOrDisabled": false,
          "residenceState": "MI",
          "countableResources": 500,
          "incomeSources": [
            {
              "id": "inc1",
              "type": "unearned",
              "category": "SSA",
              "monthlyAmount": 600,
              "description": "Social Security benefits",
              "isInfrequentOrIrregular": false
            },
            {
              "id": "inc2",
              "type": "earned",
              "category": "wages",
              "monthlyAmount": 400,
              "description": "Part-time work",
              "isInfrequentOrIrregular": false
            },
            {
              "id": "inc3",
              "type": "unearned",
              "category": "other",
              "monthlyAmount": 50,
              "description": "Interest income",
              "isInfrequentOrIrregular": true
            }
          ]
        }
      ],
      "enrollments": [],
      "relationships": [],
      "simpleChecks": {}
    }
  }
}

assert {
  res.status: eq 200
  res.body.checks.categoricalEligible: eq true
  res.body.checks.citizenshipEligible: eq true
  res.body.checks.residenceEligible: eq true
  res.body.checks.resourceEligible: eq true
  res.body.checks.incomeEligible: eq true
  res.body.isEligible: eq true
}

settings {
  encodeUrl: true
  timeout: 0
}
